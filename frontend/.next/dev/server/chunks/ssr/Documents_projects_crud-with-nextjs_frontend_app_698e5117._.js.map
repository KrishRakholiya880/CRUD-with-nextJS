{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/action/ProductActions.js"],"sourcesContent":["\"use server\";\n\n// revalidatePath\nimport { revalidatePath } from \"next/cache\";\n// Add new product API & get all products API\nimport {\n  fetchAllProducts,\n  addNewProducts,\n  updateProducts,\n  removeProduct,\n} from \"../httpServices/httpServices\";\n\nconst localCache = [];\n\n//Get All Products Action\n// export async function getAllProduct() {\n//   const res = await fetch(fetchAllProducts(0, 10), {\n//     next: { revalidate: 3600 },\n//   });\n//   const resData = await res.json();\n//   return (products = resData.products);\n// }\n\n// Get all products for pagination\nexport async function getProducts(page = 1, limit = 15) {\n  const skip = (page - 1) * limit;\n\n  try {\n    const res = await fetch(fetchAllProducts(skip, limit), {\n      cache: \"no-store\",\n    });\n    const data = await res.json();\n    const allproducts = data.products;\n    if (localCache) {\n      return [...localCache, ...allproducts];\n    } else {\n      return allproducts;\n    }\n  } catch (error) {\n    console.error(\"Fetch Error:\", error);\n    return [];\n  }\n}\n\n// Add Product Action\nexport async function AddProductAction(newProductData) {\n  const newProduct = {\n    id: Date.now(),\n    images: newProductData.images,\n    title: newProductData.title,\n    description: newProductData.description,\n    category: newProductData.category,\n    rating: newProductData.rating,\n    price: newProductData.price,\n  };\n\n  try {\n    const res = await fetch(addNewProducts(), {\n      method: \"POST\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newProduct),\n    });\n    const resData = await res.json();\n  } catch (error) {\n    console.log(error);\n  }\n\n  localCache.unshift(newProduct);\n  revalidatePath(\"/\");\n}\n\n// Update Product Action\nexport async function updateProductAction(formData) {\n  const id = formData.id;\n\n  const updatedData = {\n    title: formData.title,\n    description: formData.description,\n    category: formData.category,\n    rating: formData.rating,\n    price: formData.price,\n  };\n\n  try {\n    const res = await fetch(updateProducts(id), {\n      method: \"PATCH\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(updatedData),\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// Delete Product Action\nexport async function deleteProductAction(id) {\n  try {\n    const res = await fetch(removeProduct(id), {\n      method: \"DELETE\",\n    });\n    const resData = await res.json();\n    return true;\n  } catch (error) {\n    console.error(error);\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;;IA6CsB,mBAAA,WAAA,GAAA,IAAA,8SAAA,EAAA,8CAAA,mSAAA,EAAA,KAAA,GAAA,ySAAA,EAAA"}},
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/action/ProductActions.js"],"sourcesContent":["\"use server\";\n\n// revalidatePath\nimport { revalidatePath } from \"next/cache\";\n// Add new product API & get all products API\nimport {\n  fetchAllProducts,\n  addNewProducts,\n  updateProducts,\n  removeProduct,\n} from \"../httpServices/httpServices\";\n\nconst localCache = [];\n\n//Get All Products Action\n// export async function getAllProduct() {\n//   const res = await fetch(fetchAllProducts(0, 10), {\n//     next: { revalidate: 3600 },\n//   });\n//   const resData = await res.json();\n//   return (products = resData.products);\n// }\n\n// Get all products for pagination\nexport async function getProducts(page = 1, limit = 15) {\n  const skip = (page - 1) * limit;\n\n  try {\n    const res = await fetch(fetchAllProducts(skip, limit), {\n      cache: \"no-store\",\n    });\n    const data = await res.json();\n    const allproducts = data.products;\n    if (localCache) {\n      return [...localCache, ...allproducts];\n    } else {\n      return allproducts;\n    }\n  } catch (error) {\n    console.error(\"Fetch Error:\", error);\n    return [];\n  }\n}\n\n// Add Product Action\nexport async function AddProductAction(newProductData) {\n  const newProduct = {\n    id: Date.now(),\n    images: newProductData.images,\n    title: newProductData.title,\n    description: newProductData.description,\n    category: newProductData.category,\n    rating: newProductData.rating,\n    price: newProductData.price,\n  };\n\n  try {\n    const res = await fetch(addNewProducts(), {\n      method: \"POST\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newProduct),\n    });\n    const resData = await res.json();\n  } catch (error) {\n    console.log(error);\n  }\n\n  localCache.unshift(newProduct);\n  revalidatePath(\"/\");\n}\n\n// Update Product Action\nexport async function updateProductAction(formData) {\n  const id = formData.id;\n\n  const updatedData = {\n    title: formData.title,\n    description: formData.description,\n    category: formData.category,\n    rating: formData.rating,\n    price: formData.price,\n  };\n\n  try {\n    const res = await fetch(updateProducts(id), {\n      method: \"PATCH\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(updatedData),\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// Delete Product Action\nexport async function deleteProductAction(id) {\n  try {\n    const res = await fetch(removeProduct(id), {\n      method: \"DELETE\",\n    });\n    const resData = await res.json();\n    return true;\n  } catch (error) {\n    console.error(error);\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAwEsB,sBAAA,WAAA,GAAA,IAAA,8SAAA,EAAA,8CAAA,mSAAA,EAAA,KAAA,GAAA,ySAAA,EAAA"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/_components/AddProductModal/AddProductModal.js"],"sourcesContent":["\"use client\";\n\n// Actions\nimport { AddProductAction } from \"@/app/action/ProductActions\";\nimport { updateProductAction } from \"@/app/action/ProductActions\";\n// Router\nimport { useRouter } from \"next/navigation\";\n// Hooks\nimport React, { useEffect, useState } from \"react\";\n// X-mark Icon\nimport { HiMiniXMark } from \"react-icons/hi2\";\n\nexport default function AddProductModal({ productToEdit }) {\n  const router = useRouter();\n  const [isOpen, setIsOpen] = useState(false);\n  const [formData, setFormData] = useState({\n    id: null,\n    images: \"\",\n    title: \"\",\n    description: \"\",\n    category: \"\",\n    rating: \"\",\n    price: \"\",\n  });\n\n  useEffect(() => {\n    if (productToEdit) {\n      setIsOpen(true);\n      setFormData({\n        id: productToEdit.id,\n        title: productToEdit.title,\n        description: productToEdit.description,\n        category: productToEdit.category,\n        rating: productToEdit.rating,\n        price: productToEdit.price,\n        images: \"\",\n      });\n    }\n  }, [productToEdit]);\n\n  // handleChange function\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n    setFormData({\n      images: \"\",\n      title: \"\",\n      description: \"\",\n      category: \"\",\n      rating: \"\",\n      price: \"\",\n    });\n    router.push(\"/\");\n  };\n\n  // handleSubmit function\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (formData.id) {\n      await updateProductAction(formData);\n    } else {\n      await AddProductAction(formData);\n    }\n\n    handleClose();\n  };\n\n  return (\n    <div>\n      {/* Add Product Button */}\n      <div className=\"mt-10 ml-20\">\n        <button\n          className=\"px-4 py-2 text-white bg-blue-500 hover:bg-blue-600 transition-all duration-300 rounded-xl cursor-pointer\"\n          onClick={() => setIsOpen(!isOpen)}>\n          Add Product\n        </button>\n      </div>\n\n      {/* Modal */}\n      {isOpen && (\n        <div className=\"fixed top-0 left-0 bg-[rgba(0,0,0,0.5)] flex justify-center items-center w-full h-screen z-10\">\n          <div className=\"flex flex-col gap-5 relative w-[800px] h-auto overflow-y-auto text-black bg-white border-2 border-black rounded-2xl p-8\">\n            <div className=\"flex justify-between items-center\">\n              <h1 className=\"text-2xl\">\n                {formData.id ? \"Edit Product\" : \"Add Product\"}\n              </h1>\n              <button\n                className=\"cursor-pointer text-black text-2xl\"\n                onClick={() => setIsOpen(!isOpen)}>\n                <HiMiniXMark />\n              </button>\n            </div>\n            <div className=\"modal-inputs\">\n              <form className=\"flex flex-col gap-3\" onSubmit={handleSubmit}>\n                <div className=\"flex flex-col gap-2\">\n                  <label htmlFor=\"productImg\">Product Image:</label>\n                  <input\n                    type=\"file\"\n                    id=\"productImg\"\n                    name=\"images\"\n                    className=\"border border-slate-300 w-full p-2 rounded-xl outline-0\"\n                    placeholder=\"Select an image\"\n                    onChange={(e) =>\n                      setFormData((prev) => ({\n                        ...prev,\n                        images: e.target.files[0]\n                          ? [URL.createObjectURL(e.target.files[0])]\n                          : [],\n                      }))\n                    }\n                  />\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <label htmlFor=\"productTitle\">Product Title:</label>\n                  <input\n                    type=\"text\"\n                    id=\"productTitle\"\n                    name=\"title\"\n                    value={formData.title}\n                    className=\"border border-slate-300 w-full p-2 rounded-xl outline-0\"\n                    placeholder=\"Enter a title\"\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <label htmlFor=\"productDeacription\">\n                    Product Description:\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"productDeacription\"\n                    name=\"description\"\n                    value={formData.description}\n                    className=\"border border-slate-300 w-full p-2 rounded-xl outline-0\"\n                    placeholder=\"Enter a description\"\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <label htmlFor=\"productCategory\">Product Category:</label>\n                  <input\n                    type=\"text\"\n                    id=\"productCategory\"\n                    name=\"category\"\n                    value={formData.category}\n                    className=\"border border-slate-300 w-full p-2 rounded-xl outline-0\"\n                    placeholder=\"Enter a category\"\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <label htmlFor=\"productRating\">Product Rating:</label>\n                  <input\n                    type=\"number\"\n                    id=\"productRating\"\n                    name=\"rating\"\n                    value={formData.rating}\n                    className=\"border border-slate-300 w-full p-2 rounded-xl outline-0\"\n                    placeholder=\"Enter a rating\"\n                    onChange={handleChange}\n                  />\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <label htmlFor=\"productPrice\">Product Price:</label>\n                  <input\n                    type=\"number\"\n                    id=\"productPrice\"\n                    name=\"price\"\n                    value={formData.price}\n                    className=\"border border-slate-300 w-full p-2 rounded-xl outline-0\"\n                    placeholder=\"Enter a price\"\n                    onChange={handleChange}\n                  />\n                </div>\n                <button className=\"bg-green-600 text-white w-full text-center mt-3 py-2 rounded-3xl cursor-pointer\">\n                  {formData.id ? \"Edit Product\" : \"Add Product\"}\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/_components/DataCard/DataCard.jsx"],"sourcesContent":["\"use client\";\n\n// Image component\nimport Image from \"next/image\";\n// Link\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\n// Hooks\nimport { useEffect, useState } from \"react\";\n\nexport default function DataCard({\n  id,\n  image,\n  title,\n  description,\n  category,\n  rating,\n  price,\n  onRemove,\n  token,\n  userdata,\n}) {\n  // Router\n  const router = useRouter();\n  // State\n  const [isVisible, setIsVisible] = useState(true);\n\n  // Remove a product\n  const removeProducts = async (id) => {\n    setIsVisible(false);\n    await onRemove(id);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <Link\n      href={`/products/${id}`}\n      className=\"border rounded-2xl p-4 lg:p-5 space-y-4 text-sm lg:text-base transition-all duration-300 hover:shadow-xl hover:-translate-y-1 bg-white dark:bg-black\">\n      <div className=\"overflow-hidden text-center\">\n        <Image\n          src={image}\n          alt=\"productImages\"\n          width={250}\n          height={250}\n          className=\"object-cover mx-auto w-[180px] h-[180px] md:w-[220px] md:h-[220px] transition-transform duration-300 hover:scale-105\"\n          placeholder=\"blur\"\n          blurDataURL=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAUElEQVR4nO3OMRHAIAAAMcBkj8O/jxro8hMdEgWZzz7jf9btwDetQqvQKrQKrUKr0Cq0Cq1Cq9AqtAqtQqvQKrQKrUKr0Cq0Cq1Cq9AqtIoXooYBb1MYuvkAAAAASUVORK5CYII=\"\n        />\n      </div>\n\n      <p className=\"truncate\">\n        <b>Title:</b> {title.length > 15 ? title.slice(0, 14) + \"...\" : title}\n      </p>\n\n      <p>\n        <b>Description:</b>{\" \"}\n        {description.length > 20\n          ? description.slice(0, 19) + \"...\"\n          : description}\n      </p>\n\n      <p>\n        <b>Category:</b> {category}\n      </p>\n\n      <p>\n        <b>Rating:</b> ⭐ {rating}\n      </p>\n\n      <p className=\"font-semibold text-lg\">\n        <b>Price:</b> ₹{price}\n      </p>\n\n      {token && userdata.role === \"admin\" && (\n        <div className=\"flex flex-col sm:flex-row gap-3 pt-3\">\n          <button\n            className=\"flex-1 py-2 text-sm lg:text-base bg-green-500 border-2 border-green-500 rounded-xl transition-all hover:bg-transparent\"\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              router.push(`/?edit=${id}`, { scroll: false });\n            }}>\n            Edit\n          </button>\n\n          <button\n            className=\"flex-1 py-2 text-sm lg:text-base bg-red-500 border-2 border-red-500 rounded-xl transition-all hover:bg-transparent\"\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              removeProducts(id);\n            }}>\n            Delete\n          </button>\n        </div>\n      )}\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA,kBAAkB;AAClB;AACA,OAAO;AACP;AACA;AACA,QAAQ;AACR;AARA;;;;;;AAUe,SAAS,SAAS,EAC/B,EAAE,EACF,KAAK,EACL,KAAK,EACL,WAAW,EACX,QAAQ,EACR,MAAM,EACN,KAAK,EACL,QAAQ,EACR,KAAK,EACL,QAAQ,EACT;IACC,SAAS;IACT,MAAM,SAAS,IAAA,8MAAS;IACxB,QAAQ;IACR,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gRAAQ,EAAC;IAE3C,mBAAmB;IACnB,MAAM,iBAAiB,OAAO;QAC5B,aAAa;QACb,MAAM,SAAS;IACjB;IAEA,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACE,6SAAC,sOAAI;QACH,MAAM,CAAC,UAAU,EAAE,IAAI;QACvB,WAAU;;0BACV,6SAAC;gBAAI,WAAU;0BACb,cAAA,6SAAC,uMAAK;oBACJ,KAAK;oBACL,KAAI;oBACJ,OAAO;oBACP,QAAQ;oBACR,WAAU;oBACV,aAAY;oBACZ,aAAY;;;;;;;;;;;0BAIhB,6SAAC;gBAAE,WAAU;;kCACX,6SAAC;kCAAE;;;;;;oBAAU;oBAAE,MAAM,MAAM,GAAG,KAAK,MAAM,KAAK,CAAC,GAAG,MAAM,QAAQ;;;;;;;0BAGlE,6SAAC;;kCACC,6SAAC;kCAAE;;;;;;oBAAiB;oBACnB,YAAY,MAAM,GAAG,KAClB,YAAY,KAAK,CAAC,GAAG,MAAM,QAC3B;;;;;;;0BAGN,6SAAC;;kCACC,6SAAC;kCAAE;;;;;;oBAAa;oBAAE;;;;;;;0BAGpB,6SAAC;;kCACC,6SAAC;kCAAE;;;;;;oBAAW;oBAAI;;;;;;;0BAGpB,6SAAC;gBAAE,WAAU;;kCACX,6SAAC;kCAAE;;;;;;oBAAU;oBAAG;;;;;;;YAGjB,SAAS,SAAS,IAAI,KAAK,yBAC1B,6SAAC;gBAAI,WAAU;;kCACb,6SAAC;wBACC,WAAU;wBACV,SAAS,CAAC;4BACR,EAAE,cAAc;4BAChB,EAAE,eAAe;4BACjB,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,IAAI,EAAE;gCAAE,QAAQ;4BAAM;wBAC9C;kCAAG;;;;;;kCAIL,6SAAC;wBACC,WAAU;wBACV,SAAS,CAAC;4BACR,EAAE,cAAc;4BAChB,EAAE,eAAe;4BACjB,eAAe;wBACjB;kCAAG;;;;;;;;;;;;;;;;;;AAOf"}},
    {"offset": {"line": 579, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/action/ProductActions.js"],"sourcesContent":["\"use server\";\n\n// revalidatePath\nimport { revalidatePath } from \"next/cache\";\n// Add new product API & get all products API\nimport {\n  fetchAllProducts,\n  addNewProducts,\n  updateProducts,\n  removeProduct,\n} from \"../httpServices/httpServices\";\n\nconst localCache = [];\n\n//Get All Products Action\n// export async function getAllProduct() {\n//   const res = await fetch(fetchAllProducts(0, 10), {\n//     next: { revalidate: 3600 },\n//   });\n//   const resData = await res.json();\n//   return (products = resData.products);\n// }\n\n// Get all products for pagination\nexport async function getProducts(page = 1, limit = 15) {\n  const skip = (page - 1) * limit;\n\n  try {\n    const res = await fetch(fetchAllProducts(skip, limit), {\n      cache: \"no-store\",\n    });\n    const data = await res.json();\n    const allproducts = data.products;\n    if (localCache) {\n      return [...localCache, ...allproducts];\n    } else {\n      return allproducts;\n    }\n  } catch (error) {\n    console.error(\"Fetch Error:\", error);\n    return [];\n  }\n}\n\n// Add Product Action\nexport async function AddProductAction(newProductData) {\n  const newProduct = {\n    id: Date.now(),\n    images: newProductData.images,\n    title: newProductData.title,\n    description: newProductData.description,\n    category: newProductData.category,\n    rating: newProductData.rating,\n    price: newProductData.price,\n  };\n\n  try {\n    const res = await fetch(addNewProducts(), {\n      method: \"POST\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newProduct),\n    });\n    const resData = await res.json();\n  } catch (error) {\n    console.log(error);\n  }\n\n  localCache.unshift(newProduct);\n  revalidatePath(\"/\");\n}\n\n// Update Product Action\nexport async function updateProductAction(formData) {\n  const id = formData.id;\n\n  const updatedData = {\n    title: formData.title,\n    description: formData.description,\n    category: formData.category,\n    rating: formData.rating,\n    price: formData.price,\n  };\n\n  try {\n    const res = await fetch(updateProducts(id), {\n      method: \"PATCH\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(updatedData),\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// Delete Product Action\nexport async function deleteProductAction(id) {\n  try {\n    const res = await fetch(removeProduct(id), {\n      method: \"DELETE\",\n    });\n    const resData = await res.json();\n    return true;\n  } catch (error) {\n    console.error(error);\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAwBsB,cAAA,WAAA,GAAA,IAAA,8SAAA,EAAA,8CAAA,mSAAA,EAAA,KAAA,GAAA,ySAAA,EAAA"}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/_components/ProductFeed/ProductFeed.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport DataCard from \"../DataCard/DataCard\";\nimport { getProducts } from \"@/app/action/ProductActions\";\nimport { usePathname } from \"next/navigation\";\n\nexport default function ProductFeed({ initialProducts, token, userdata }) {\n  // States\n  const [products, setProducts] = useState(initialProducts);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n\n  const pathname = usePathname();\n\n  // Effect for set the URL to \"/\" when page loaded\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      window.history.replaceState(null, \"\", pathname);\n    }\n  }, []);\n\n  // Function to load more\n  const loadMore = useCallback(async () => {\n    if (loading || !hasMore) return;\n    setLoading(true);\n    const nextPage = page + 1;\n\n    // fetch new data\n    const newProducts = await getProducts(nextPage);\n\n    if (newProducts.length === 0) {\n      setHasMore(false);\n    } else {\n      setProducts((prev) => [...prev, ...newProducts]);\n      setPage(nextPage);\n\n      window.history.replaceState(null, \"\", `${pathname}?page=${nextPage}`);\n    }\n\n    setLoading(false);\n  }, [page, loading, hasMore]);\n\n  // Scrolling effect\n  useEffect(() => {\n    const handleScroll = () => {\n      if (loading || !hasMore) return;\n\n      const { scrollTop, clientHeight, scrollHeight } =\n        document.documentElement;\n\n      if (scrollTop + clientHeight >= scrollHeight - 200) {\n        loadMore();\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [loadMore, loading, hasMore]);\n\n  return (\n    <main className=\"flex flex-col items-center w-full\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {products &&\n          products?.map((product, index) => (\n            <DataCard\n              key={`${product.id} - ${index}`}\n              id={product.id}\n              image={product.images[0]}\n              title={product.title}\n              description={product.description}\n              category={product.category}\n              rating={product.rating}\n              price={product.price}\n              token={token}\n              userdata={userdata}\n              priority={index < 4}\n            />\n          ))}\n      </div>\n      <div>\n        {loading && (\n          <p className=\"text-blue-500 font-bold animate-pulse\">\n            Loading more items...\n          </p>\n        )}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,YAAY,EAAE,eAAe,EAAE,KAAK,EAAE,QAAQ,EAAE;IACtE,SAAS;IACT,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gRAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gRAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gRAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gRAAQ,EAAC;IAEvC,MAAM,WAAW,IAAA,gNAAW;IAE5B,iDAAiD;IACjD,IAAA,iRAAS,EAAC;QACR;;IAGF,GAAG,EAAE;IAEL,wBAAwB;IACxB,MAAM,WAAW,IAAA,mRAAW,EAAC;QAC3B,IAAI,WAAW,CAAC,SAAS;QACzB,WAAW;QACX,MAAM,WAAW,OAAO;QAExB,iBAAiB;QACjB,MAAM,cAAc,MAAM,IAAA,mOAAW,EAAC;QAEtC,IAAI,YAAY,MAAM,KAAK,GAAG;YAC5B,WAAW;QACb,OAAO;YACL,YAAY,CAAC,OAAS;uBAAI;uBAAS;iBAAY;YAC/C,QAAQ;YAER,OAAO,OAAO,CAAC,YAAY,CAAC,MAAM,IAAI,GAAG,SAAS,MAAM,EAAE,UAAU;QACtE;QAEA,WAAW;IACb,GAAG;QAAC;QAAM;QAAS;KAAQ;IAE3B,mBAAmB;IACnB,IAAA,iRAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI,WAAW,CAAC,SAAS;YAEzB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,GAC7C,SAAS,eAAe;YAE1B,IAAI,YAAY,gBAAgB,eAAe,KAAK;gBAClD;YACF;QACF;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAElC,OAAO;YACL,OAAO,mBAAmB,CAAC,UAAU;QACvC;IACF,GAAG;QAAC;QAAU;QAAS;KAAQ;IAE/B,qBACE,6SAAC;QAAK,WAAU;;0BACd,6SAAC;gBAAI,WAAU;0BACZ,YACC,UAAU,IAAI,CAAC,SAAS,sBACtB,6SAAC,qNAAQ;wBAEP,IAAI,QAAQ,EAAE;wBACd,OAAO,QAAQ,MAAM,CAAC,EAAE;wBACxB,OAAO,QAAQ,KAAK;wBACpB,aAAa,QAAQ,WAAW;wBAChC,UAAU,QAAQ,QAAQ;wBAC1B,QAAQ,QAAQ,MAAM;wBACtB,OAAO,QAAQ,KAAK;wBACpB,OAAO;wBACP,UAAU;wBACV,UAAU,QAAQ;uBAVb,GAAG,QAAQ,EAAE,CAAC,GAAG,EAAE,OAAO;;;;;;;;;;0BAcvC,6SAAC;0BACE,yBACC,6SAAC;oBAAE,WAAU;8BAAwC;;;;;;;;;;;;;;;;;AAO/D"}}]
}