{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/_components/DataCard/DataCard.jsx"],"sourcesContent":["\"use client\";\n\n// Image component\nimport Image from \"next/image\";\n// Link\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\n// Hooks\nimport { useEffect, useState } from \"react\";\n\nexport default function DataCard({\n  id,\n  image,\n  title,\n  description,\n  category,\n  rating,\n  price,\n  onRemove,\n  token,\n  userdata,\n}) {\n  // Router\n  const router = useRouter();\n  // State\n  const [isVisible, setIsVisible] = useState(true);\n\n  // Remove a product\n  const removeProducts = async (id) => {\n    setIsVisible(false);\n    await onRemove(id);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <Link\n      href={`/products/${id}`}\n      className=\"border rounded-2xl p-4 lg:p-5 space-y-4 text-sm lg:text-base transition-all duration-300 hover:shadow-xl hover:-translate-y-1 bg-white dark:bg-black\">\n      <div className=\"overflow-hidden text-center\">\n        <Image\n          src={image}\n          alt=\"productImages\"\n          width={250}\n          height={250}\n          className=\"object-cover mx-auto w-[180px] h-[180px] md:w-[220px] md:h-[220px] transition-transform duration-300 hover:scale-105\"\n          placeholder=\"blur\"\n          blurDataURL=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAAUElEQVR4nO3OMRHAIAAAMcBkj8O/jxro8hMdEgWZzz7jf9btwDetQqvQKrQKrUKr0Cq0Cq1Cq9AqtAqtQqvQKrQKrUKr0Cq0Cq1Cq9AqtIoXooYBb1MYuvkAAAAASUVORK5CYII=\"\n        />\n      </div>\n\n      <p className=\"truncate\">\n        <b>Title:</b> {title.length > 15 ? title.slice(0, 14) + \"...\" : title}\n      </p>\n\n      <p>\n        <b>Description:</b>{\" \"}\n        {description.length > 20\n          ? description.slice(0, 19) + \"...\"\n          : description}\n      </p>\n\n      <p>\n        <b>Category:</b> {category}\n      </p>\n\n      <p>\n        <b>Rating:</b> ⭐ {rating}\n      </p>\n\n      <p className=\"font-semibold text-lg\">\n        <b>Price:</b> ₹{price}\n      </p>\n\n      {token && userdata.role === \"admin\" && (\n        <div className=\"flex flex-col sm:flex-row gap-3 pt-3\">\n          <button\n            className=\"flex-1 py-2 text-sm lg:text-base bg-green-500 border-2 border-green-500 rounded-xl transition-all hover:bg-transparent\"\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              router.push(`/?edit=${id}`, { scroll: false });\n            }}>\n            Edit\n          </button>\n\n          <button\n            className=\"flex-1 py-2 text-sm lg:text-base bg-red-500 border-2 border-red-500 rounded-xl transition-all hover:bg-transparent\"\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              removeProducts(id);\n            }}>\n            Delete\n          </button>\n        </div>\n      )}\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA,kBAAkB;AAClB;AACA,OAAO;AACP;AACA;AACA,QAAQ;AACR;AARA;;;;;;AAUe,SAAS,SAAS,EAC/B,EAAE,EACF,KAAK,EACL,KAAK,EACL,WAAW,EACX,QAAQ,EACR,MAAM,EACN,KAAK,EACL,QAAQ,EACR,KAAK,EACL,QAAQ,EACT;IACC,SAAS;IACT,MAAM,SAAS,IAAA,8MAAS;IACxB,QAAQ;IACR,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,gRAAQ,EAAC;IAE3C,mBAAmB;IACnB,MAAM,iBAAiB,OAAO;QAC5B,aAAa;QACb,MAAM,SAAS;IACjB;IAEA,IAAI,CAAC,WAAW,OAAO;IAEvB,qBACE,6SAAC,sOAAI;QACH,MAAM,CAAC,UAAU,EAAE,IAAI;QACvB,WAAU;;0BACV,6SAAC;gBAAI,WAAU;0BACb,cAAA,6SAAC,uMAAK;oBACJ,KAAK;oBACL,KAAI;oBACJ,OAAO;oBACP,QAAQ;oBACR,WAAU;oBACV,aAAY;oBACZ,aAAY;;;;;;;;;;;0BAIhB,6SAAC;gBAAE,WAAU;;kCACX,6SAAC;kCAAE;;;;;;oBAAU;oBAAE,MAAM,MAAM,GAAG,KAAK,MAAM,KAAK,CAAC,GAAG,MAAM,QAAQ;;;;;;;0BAGlE,6SAAC;;kCACC,6SAAC;kCAAE;;;;;;oBAAiB;oBACnB,YAAY,MAAM,GAAG,KAClB,YAAY,KAAK,CAAC,GAAG,MAAM,QAC3B;;;;;;;0BAGN,6SAAC;;kCACC,6SAAC;kCAAE;;;;;;oBAAa;oBAAE;;;;;;;0BAGpB,6SAAC;;kCACC,6SAAC;kCAAE;;;;;;oBAAW;oBAAI;;;;;;;0BAGpB,6SAAC;gBAAE,WAAU;;kCACX,6SAAC;kCAAE;;;;;;oBAAU;oBAAG;;;;;;;YAGjB,SAAS,SAAS,IAAI,KAAK,yBAC1B,6SAAC;gBAAI,WAAU;;kCACb,6SAAC;wBACC,WAAU;wBACV,SAAS,CAAC;4BACR,EAAE,cAAc;4BAChB,EAAE,eAAe;4BACjB,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,IAAI,EAAE;gCAAE,QAAQ;4BAAM;wBAC9C;kCAAG;;;;;;kCAIL,6SAAC;wBACC,WAAU;wBACV,SAAS,CAAC;4BACR,EAAE,cAAc;4BAChB,EAAE,eAAe;4BACjB,eAAe;wBACjB;kCAAG;;;;;;;;;;;;;;;;;;AAOf"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/action/ProductActions.js"],"sourcesContent":["\"use server\";\n\n// revalidatePath\nimport { revalidatePath } from \"next/cache\";\n// Add new product API & get all products API\nimport {\n  fetchAllProducts,\n  addNewProducts,\n  updateProducts,\n  removeProduct,\n} from \"../httpServices/httpServices\";\n\nconst localCache = [];\n\n//Get All Products Action\n// export async function getAllProduct() {\n//   const res = await fetch(fetchAllProducts(0, 10), {\n//     next: { revalidate: 3600 },\n//   });\n//   const resData = await res.json();\n//   return (products = resData.products);\n// }\n\n// Get all products for pagination\nexport async function getProducts(page = 1, limit = 15) {\n  const skip = (page - 1) * limit;\n\n  try {\n    const res = await fetch(fetchAllProducts(skip, limit), {\n      cache: \"no-store\",\n    });\n    const data = await res.json();\n    const allproducts = data.products;\n    if (localCache) {\n      return [...localCache, ...allproducts];\n    } else {\n      return allproducts;\n    }\n  } catch (error) {\n    console.error(\"Fetch Error:\", error);\n    return [];\n  }\n}\n\n// Add Product Action\nexport async function AddProductAction(newProductData) {\n  const newProduct = {\n    id: Date.now(),\n    images: newProductData.images,\n    title: newProductData.title,\n    description: newProductData.description,\n    category: newProductData.category,\n    rating: newProductData.rating,\n    price: newProductData.price,\n  };\n\n  try {\n    const res = await fetch(addNewProducts(), {\n      method: \"POST\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(newProduct),\n    });\n    const resData = await res.json();\n  } catch (error) {\n    console.log(error);\n  }\n\n  localCache.unshift(newProduct);\n  revalidatePath(\"/\");\n}\n\n// Update Product Action\nexport async function updateProductAction(formData) {\n  const id = formData.id;\n\n  const updatedData = {\n    title: formData.title,\n    description: formData.description,\n    category: formData.category,\n    rating: formData.rating,\n    price: formData.price,\n  };\n\n  try {\n    const res = await fetch(updateProducts(id), {\n      method: \"PATCH\",\n      header: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(updatedData),\n    });\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// Delete Product Action\nexport async function deleteProductAction(id) {\n  try {\n    const res = await fetch(removeProduct(id), {\n      method: \"DELETE\",\n    });\n    const resData = await res.json();\n    return true;\n  } catch (error) {\n    console.error(error);\n    return false;\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAwBsB,cAAA,WAAA,GAAA,IAAA,8SAAA,EAAA,8CAAA,mSAAA,EAAA,KAAA,GAAA,ySAAA,EAAA"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/projects/crud-with-nextjs/frontend/app/_components/ProductFeed/ProductFeed.jsx"],"sourcesContent":["\"use client\";\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport DataCard from \"../DataCard/DataCard\";\nimport { getProducts } from \"@/app/action/ProductActions\";\nimport { usePathname } from \"next/navigation\";\n\nexport default function ProductFeed({ initialProducts, token, userdata }) {\n  // States\n  const [products, setProducts] = useState(initialProducts);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n\n  const pathname = usePathname();\n\n  // Effect for set the URL to \"/\" when page loaded\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      window.history.replaceState(null, \"\", pathname);\n    }\n  }, []);\n\n  // Function to load more\n  const loadMore = useCallback(async () => {\n    if (loading || !hasMore) return;\n    setLoading(true);\n    const nextPage = page + 1;\n\n    // fetch new data\n    const newProducts = await getProducts(nextPage);\n\n    if (newProducts.length === 0) {\n      setHasMore(false);\n    } else {\n      setProducts((prev) => [...prev, ...newProducts]);\n      setPage(nextPage);\n\n      window.history.replaceState(null, \"\", `${pathname}?page=${nextPage}`);\n    }\n\n    setLoading(false);\n  }, [page, loading, hasMore]);\n\n  // Scrolling effect\n  useEffect(() => {\n    const handleScroll = () => {\n      if (loading || !hasMore) return;\n\n      const { scrollTop, clientHeight, scrollHeight } =\n        document.documentElement;\n\n      if (scrollTop + clientHeight >= scrollHeight - 200) {\n        loadMore();\n      }\n    };\n\n    window.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [loadMore, loading, hasMore]);\n\n  return (\n    <main className=\"flex flex-col items-center w-full\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {products &&\n          products?.map((product, index) => (\n            <DataCard\n              key={`${product.id} - ${index}`}\n              id={product.id}\n              image={product.images[0]}\n              title={product.title}\n              description={product.description}\n              category={product.category}\n              rating={product.rating}\n              price={product.price}\n              token={token}\n              userdata={userdata}\n              priority={index < 4}age\n            />\n          ))}\n      </div>\n      <div>\n        {loading && (\n          <p className=\"text-blue-500 font-bold animate-pulse\">\n            Loading more items...\n          </p>\n        )}\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,YAAY,EAAE,eAAe,EAAE,KAAK,EAAE,QAAQ,EAAE;IACtE,SAAS;IACT,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,gRAAQ,EAAC;IACzC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,gRAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gRAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gRAAQ,EAAC;IAEvC,MAAM,WAAW,IAAA,gNAAW;IAE5B,iDAAiD;IACjD,IAAA,iRAAS,EAAC;QACR;;IAGF,GAAG,EAAE;IAEL,wBAAwB;IACxB,MAAM,WAAW,IAAA,mRAAW,EAAC;QAC3B,IAAI,WAAW,CAAC,SAAS;QACzB,WAAW;QACX,MAAM,WAAW,OAAO;QAExB,iBAAiB;QACjB,MAAM,cAAc,MAAM,IAAA,mOAAW,EAAC;QAEtC,IAAI,YAAY,MAAM,KAAK,GAAG;YAC5B,WAAW;QACb,OAAO;YACL,YAAY,CAAC,OAAS;uBAAI;uBAAS;iBAAY;YAC/C,QAAQ;YAER,OAAO,OAAO,CAAC,YAAY,CAAC,MAAM,IAAI,GAAG,SAAS,MAAM,EAAE,UAAU;QACtE;QAEA,WAAW;IACb,GAAG;QAAC;QAAM;QAAS;KAAQ;IAE3B,mBAAmB;IACnB,IAAA,iRAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI,WAAW,CAAC,SAAS;YAEzB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,EAAE,GAC7C,SAAS,eAAe;YAE1B,IAAI,YAAY,gBAAgB,eAAe,KAAK;gBAClD;YACF;QACF;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAElC,OAAO;YACL,OAAO,mBAAmB,CAAC,UAAU;QACvC;IACF,GAAG;QAAC;QAAU;QAAS;KAAQ;IAE/B,qBACE,6SAAC;QAAK,WAAU;;0BACd,6SAAC;gBAAI,WAAU;0BACZ,YACC,UAAU,IAAI,CAAC,SAAS,sBACtB,6SAAC,qNAAQ;wBAEP,IAAI,QAAQ,EAAE;wBACd,OAAO,QAAQ,MAAM,CAAC,EAAE;wBACxB,OAAO,QAAQ,KAAK;wBACpB,aAAa,QAAQ,WAAW;wBAChC,UAAU,QAAQ,QAAQ;wBAC1B,QAAQ,QAAQ,MAAM;wBACtB,OAAO,QAAQ,KAAK;wBACpB,OAAO;wBACP,UAAU;wBACV,UAAU,QAAQ;wBAAE,GAAG;uBAVlB,GAAG,QAAQ,EAAE,CAAC,GAAG,EAAE,OAAO;;;;;;;;;;0BAcvC,6SAAC;0BACE,yBACC,6SAAC;oBAAE,WAAU;8BAAwC;;;;;;;;;;;;;;;;;AAO/D"}}]
}